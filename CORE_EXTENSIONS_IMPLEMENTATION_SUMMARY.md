# Aetheriusæ ¸å¿ƒæ‰©å±•å®ç°æ€»ç»“

## ğŸ“‹ æ¦‚è¿°

å·²æˆåŠŸä¸ºAetheriusæ ¸å¿ƒç³»ç»Ÿå®ç°äº†å…¨é¢çš„Webç»„ä»¶æ”¯æŒæ‰©å±•ã€‚è¿™äº›æ‰©å±•æä¾›äº†å®Œæ•´çš„ç»„ä»¶ç³»ç»Ÿã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€Webæ¥å£é›†æˆå’Œç®¡ç†åŠŸèƒ½ã€‚

## ğŸ—ï¸ 1. ç»„ä»¶ç³»ç»ŸåŸºç¡€æ¶æ„

### 1.1 ComponentåŸºç±» (`aetherius/core/component.py`)

**å®ç°åŠŸèƒ½:**
- âœ… å®Œæ•´çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç† (`on_load`, `on_enable`, `on_disable`, `on_unload`)
- âœ… äº‹ä»¶ç³»ç»Ÿé›†æˆï¼ˆè‡ªåŠ¨æ³¨å†Œ/æ³¨é”€äº‹ä»¶å¤„ç†å™¨ï¼‰
- âœ… æ ¸å¿ƒæœåŠ¡è®¿é—®ï¼ˆæœåŠ¡å™¨ç®¡ç†å™¨ã€ç©å®¶ç®¡ç†å™¨ã€é…ç½®ç®¡ç†å™¨ç­‰ï¼‰
- âœ… æ•°æ®æŒä¹…åŒ–åŠŸèƒ½ï¼ˆ`save_data`, `load_data`ï¼‰
- âœ… çŠ¶æ€è¿½è¸ªå’Œç›‘æ§
- âœ… WebComponentä¸“ç”¨åŸºç±»ï¼ˆæ”¯æŒWebè·¯ç”±å’ŒAPIç«¯ç‚¹ï¼‰

**å…³é”®ç‰¹æ€§:**
```python
# åŸºç¡€ç»„ä»¶
class Component(ABC):
    - ç”Ÿå‘½å‘¨æœŸç®¡ç†
    - äº‹ä»¶ç³»ç»Ÿé›†æˆ
    - æ•°æ®å­˜å‚¨
    - æ ¸å¿ƒæœåŠ¡è®¿é—®

# Webç»„ä»¶æ‰©å±•
class WebComponent(Component):
    - Webè·¯ç”±ç®¡ç†
    - APIç«¯ç‚¹æ³¨å†Œ
    - Webç•Œé¢è®¾ç½®
```

### 1.2 ComponentInfoæ•°æ®ç»“æ„

**å®ç°åŠŸèƒ½:**
- âœ… å®Œæ•´çš„ç»„ä»¶å…ƒæ•°æ®å®šä¹‰
- âœ… ä¾èµ–å…³ç³»ç®¡ç†ï¼ˆç¡¬ä¾èµ–å’Œè½¯ä¾èµ–ï¼‰
- âœ… é…ç½®æ¶æ„å’Œé»˜è®¤é…ç½®
- âœ… Webç»„ä»¶ç‰¹æ®Šå±æ€§æ”¯æŒ
- âœ… éªŒè¯å’Œåºåˆ—åŒ–åŠŸèƒ½

### 1.3 ComponentManager (`aetherius/core/component_manager.py`)

**å®ç°åŠŸèƒ½:**
- âœ… ç»„ä»¶å‘ç°å’Œæ‰«æ
- âœ… ä¾èµ–å…³ç³»åˆ†æå’Œæ‹“æ‰‘æ’åº
- âœ… ç»„ä»¶åŠ è½½ã€å¯ç”¨ã€ç¦ç”¨ã€å¸è½½
- âœ… çƒ­é‡è½½æ”¯æŒ
- âœ… Webç»„ä»¶ä¸“é—¨ç®¡ç†
- âœ… çŠ¶æ€è¿½è¸ªå’Œè¯Šæ–­
- âœ… äº‹ä»¶é€šçŸ¥ç³»ç»Ÿ

**å…³é”®ç‰¹æ€§:**
```python
# æ ¸å¿ƒåŠŸèƒ½
- è‡ªåŠ¨ä¾èµ–è§£æ
- æ‹“æ‰‘æ’åºç¡®ä¿æ­£ç¡®åŠ è½½é¡ºåº
- é…ç½®éªŒè¯å’ŒåŠ è½½
- Webç»„ä»¶è·¯ç”±å’ŒAPIç®¡ç†
- è¯¦ç»†çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—
```

## ğŸ¯ 2. äº‹ä»¶ç³»ç»Ÿæ¶æ„æ‰©å±• (`aetherius/core/event_manager.py`)

**å®ç°åŠŸèƒ½:**
- âœ… Webç»„ä»¶äº‹ä»¶å†å²è®°å½•ï¼ˆæœ€å¤š1000æ¡ï¼‰
- âœ… Webå®¢æˆ·ç«¯äº‹ä»¶è®¢é˜…ç³»ç»Ÿ
- âœ… å®æ—¶äº‹ä»¶æ¨é€æ”¯æŒ
- âœ… äº‹ä»¶è¿‡æ»¤å™¨æœºåˆ¶
- âœ… æ€§èƒ½ç›‘æ§å’Œæ…¢äº‹ä»¶æ£€æµ‹
- âœ… äº‹ä»¶åºåˆ—åŒ–å’ŒWebSocketé€šçŸ¥å‡†å¤‡

**å…³é”®ç‰¹æ€§:**
```python
# Webæ”¯æŒæ‰©å±•
- subscribe_to_events() - Webå®¢æˆ·ç«¯è®¢é˜…
- get_event_history() - å†å²äº‹ä»¶æŸ¥è¯¢
- set_real_time_events() - å®æ—¶æ¨é€é…ç½®
- performance monitoring - æ€§èƒ½ç»Ÿè®¡
- event filtering - äº‹ä»¶è¿‡æ»¤
```

## ğŸ–¥ï¸ 3. æœåŠ¡å™¨ç®¡ç†æ‰©å±• (`aetherius/core/server_manager_extensions.py`)

**å®ç°åŠŸèƒ½:**
- âœ… å®æ—¶æ€§èƒ½ç›‘æ§ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œï¼‰
- âœ… æœåŠ¡å™¨çŠ¶æ€ç®¡ç†å’Œç¼“å­˜
- âœ… åœ¨çº¿ç©å®¶è·Ÿè¸ª
- âœ… å‘½ä»¤æ‰§è¡Œå’Œç»“æœåé¦ˆ
- âœ… è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ
- âœ… æ€§èƒ½å†å²æ•°æ®å­˜å‚¨
- âœ… å›è°ƒç³»ç»Ÿæ”¯æŒ

**å…³é”®ç‰¹æ€§:**
```python
# æ€§èƒ½ç›‘æ§
class ServerPerformanceMetrics:
    - CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡
    - ç½‘ç»œI/Oç»Ÿè®¡
    - çº¿ç¨‹å’Œæ–‡ä»¶æè¿°ç¬¦è®¡æ•°
    - å®æ—¶æ€§èƒ½æ•°æ®æ”¶é›†

# æœåŠ¡å™¨çŠ¶æ€
class ServerStatus:
    - è¿è¡ŒçŠ¶æ€å’Œå¯åŠ¨æ—¶é—´
    - ç©å®¶æ•°é‡å’ŒTPS
    - æ¸¸æˆé…ç½®ä¿¡æ¯
    - ä¸–ç•Œè®¾ç½®
```

## ğŸ‘¥ 4. ç©å®¶æ•°æ®ç®¡ç†æ‰©å±• (`aetherius/core/player_manager_extensions.py`)

**å®ç°åŠŸèƒ½:**
- âœ… SQLiteæ•°æ®åº“å­˜å‚¨
- âœ… æ‰©å±•ç©å®¶ä¿¡æ¯ç®¡ç†
- âœ… ä¼šè¯è·Ÿè¸ªå’Œæ¸¸æˆæ—¶é—´ç»Ÿè®¡
- âœ… ç©å®¶è¡Œä¸ºè®°å½•ç³»ç»Ÿ
- âœ… æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- âœ… ç©å®¶ç®¡ç†æ“ä½œï¼ˆå°ç¦ã€è§£å°ç­‰ï¼‰
- âœ… æœåŠ¡å™¨ç»Ÿè®¡ä¿¡æ¯

**å…³é”®ç‰¹æ€§:**
```python
# æ‰©å±•ç©å®¶ä¿¡æ¯
class ExtendedPlayerInfo:
    - åŸºç¡€ä¿¡æ¯ï¼ˆå§“åã€UUIDã€æ˜¾ç¤ºåï¼‰
    - è¿æ¥ä¿¡æ¯ï¼ˆIPã€åŠ å…¥æ—¶é—´ã€æ¸¸æˆæ—¶é•¿ï¼‰
    - æ¸¸æˆæ•°æ®ï¼ˆä½ç½®ã€ç»Ÿè®¡ã€æˆå°±ï¼‰
    - ç®¡ç†ä¿¡æ¯ï¼ˆæƒé™ã€å°ç¦çŠ¶æ€ï¼‰
    - ç¤¾äº¤ä¿¡æ¯ï¼ˆå¥½å‹ã€å¿½ç•¥åˆ—è¡¨ï¼‰

# æ•°æ®åº“è¡¨ç»“æ„
- players (åŸºç¡€ä¿¡æ¯)
- player_sessions (ä¼šè¯è®°å½•)
- player_actions (è¡Œä¸ºè®°å½•)
- player_stats (ç»Ÿè®¡æ•°æ®)
```

## ğŸ“ 5. æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ (`aetherius/core/file_manager.py`)

**å®ç°åŠŸèƒ½:**
- âœ… å®‰å…¨çš„æ–‡ä»¶æ“ä½œï¼ˆè·¯å¾„éªŒè¯ã€æƒé™æ£€æŸ¥ï¼‰
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯å’Œå¤§å°é™åˆ¶
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½æ”¯æŒ
- âœ… å‹ç¼©åŒ…åˆ›å»ºå’Œè§£å‹
- âœ… æ–‡ä»¶æœç´¢å’Œç»Ÿè®¡
- âœ… ä¸´æ—¶æ–‡ä»¶ç®¡ç†
- âœ… ç£ç›˜ä½¿ç”¨æƒ…å†µç›‘æ§

**å…³é”®ç‰¹æ€§:**
```python
# å®‰å…¨ç‰¹æ€§
- è·¯å¾„æ³¨å…¥é˜²æŠ¤
- æ–‡ä»¶ç±»å‹ç™½åå•
- å¤§å°é™åˆ¶ï¼ˆé»˜è®¤100MBï¼‰
- MD5å“ˆå¸ŒéªŒè¯

# æ–‡ä»¶æ“ä½œ
- è¯»å†™ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ é™¤
- ç›®å½•ç®¡ç†å’Œé€’å½’æ“ä½œ
- å‹ç¼©åŒ…å¤„ç†
- ä¸Šä¼ å†å²è®°å½•
```

## âš™ï¸ 6. é…ç½®ç®¡ç†æ‰©å±• (`aetherius/core/config_manager_extensions.py`)

**å®ç°åŠŸèƒ½:**
- âœ… é…ç½®æ®µç®¡ç†å’Œæ¶æ„éªŒè¯
- âœ… é…ç½®å˜æ›´å†å²è®°å½•
- âœ… å®æ—¶éªŒè¯å’Œå›è°ƒç³»ç»Ÿ
- âœ… é…ç½®å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
- âœ… è‡ªåŠ¨å¤‡ä»½å’Œæ¢å¤
- âœ… JSON SchemaéªŒè¯
- âœ… é»˜è®¤é…ç½®æ®µï¼ˆæœåŠ¡å™¨ã€Webã€ç›‘æ§ï¼‰

**å…³é”®ç‰¹æ€§:**
```python
# é…ç½®æ®µç®¡ç†
class ConfigSection:
    - æ¶æ„å®šä¹‰å’ŒéªŒè¯è§„åˆ™
    - é»˜è®¤å€¼å’Œæè¿°
    - åªè¯»å’Œé‡å¯è¦æ±‚æ ‡è®°

# å˜æ›´è¿½è¸ª
class ConfigChange:
    - æ—¶é—´æˆ³ã€ç”¨æˆ·ã€æ¥æº
    - æ—§å€¼å’Œæ–°å€¼è®°å½•
    - å®¡è®¡æ—¥å¿—åŠŸèƒ½
```

## ğŸ”— 7. æ ¸å¿ƒé›†æˆ (`aetherius/core/__init__.py`)

**å®ç°åŠŸèƒ½:**
- âœ… ç»Ÿä¸€çš„å¯¼å…¥æ¥å£
- âœ… å…¨å±€å®ä¾‹ç®¡ç†å™¨
- âœ… æ¨¡å—é—´ä¾èµ–æ³¨å…¥
- âœ… å‘åå…¼å®¹æ€§ä¿è¯

## ğŸ“Š 8. ä½¿ç”¨ç¤ºä¾‹

### 8.1 Webç»„ä»¶å¼€å‘

```python
from aetherius.core import WebComponent, ComponentInfo

class MyWebComponent(WebComponent):
    async def on_enable(self):
        await super().on_enable()
        # æ³¨å†ŒWebè·¯ç”±
        self.add_route('/dashboard', self.dashboard_handler)
        self.add_api_endpoint('/api/status', self.status_api)
    
    async def dashboard_handler(self, request):
        # è·å–æœåŠ¡å™¨çŠ¶æ€
        server_mgr = self.get_server_manager()
        status = await server_mgr.get_server_status()
        return {'status': status.to_dict()}
```

### 8.2 äº‹ä»¶ç›‘å¬

```python
# ç»„ä»¶å†…äº‹ä»¶å¤„ç†
class MyComponent(Component):
    async def on_enable(self):
        # æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
        self.register_event_handler('player_join', 'on_player_join')
    
    async def on_player_join(self, event):
        # å¤„ç†ç©å®¶åŠ å…¥äº‹ä»¶
        player_name = event.player_name
        await self.emit_event('custom_welcome', {'player': player_name})
```

### 8.3 æ–‡ä»¶ç®¡ç†

```python
# å®‰å…¨æ–‡ä»¶æ“ä½œ
file_manager = FileManager('data')
# ä¸Šä¼ æ–‡ä»¶
upload_info = file_manager.upload_file(file_data, 'config.yaml', 'configs/')
# è¯»å–æ–‡ä»¶
content = file_manager.read_file('configs/config.yaml')
```

## ğŸ¯ 9. Webç»„ä»¶é›†æˆè¦ç‚¹

### 9.1 æ ¸å¿ƒæœåŠ¡è®¿é—®
```python
# åœ¨Webç»„ä»¶ä¸­è®¿é—®æ ¸å¿ƒæœåŠ¡
server_extensions = ServerManagerExtensions(self.get_server_manager())
player_extensions = PlayerManagerExtensions(self.get_player_manager())
file_manager = self.get_file_manager()
config_extensions = self.get_config_manager_extensions()
```

### 9.2 å®æ—¶æ•°æ®æ¨é€
```python
# è®¾ç½®å®æ—¶äº‹ä»¶æ¨é€
event_manager = self.core.event_manager
event_manager.set_real_time_events(['player_join', 'player_quit', 'server_status'])
event_manager.set_web_notifier(self.notify_web_clients)
```

### 9.3 é…ç½®ç®¡ç†
```python
# æ³¨å†ŒWebç»„ä»¶é…ç½®
config_mgr = self.get_config_manager_extensions()
config_mgr.register_config_section(ConfigSection(
    name='my_component',
    path='my_component.yaml',
    description='My Component Configuration',
    schema=my_schema,
    default_values=my_defaults
))
```

## âœ… 10. å®ŒæˆçŠ¶æ€

**æ‰€æœ‰æ ¸å¿ƒæ‰©å±•å·²å®Œå…¨å®ç°:**

1. âœ… **ç»„ä»¶ç³»ç»ŸåŸºç¡€æ¶æ„** - å®Œæ•´çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå’ŒWebç»„ä»¶æ”¯æŒ
2. âœ… **äº‹ä»¶ç³»ç»Ÿæ¶æ„æ‰©å±•** - Webè®¢é˜…ã€å†å²è®°å½•ã€å®æ—¶æ¨é€
3. âœ… **æœåŠ¡å™¨ç®¡ç†æ‰©å±•** - æ€§èƒ½ç›‘æ§ã€çŠ¶æ€ç®¡ç†ã€å¤‡ä»½ç³»ç»Ÿ
4. âœ… **ç©å®¶æ•°æ®ç®¡ç†æ‰©å±•** - æ•°æ®åº“å­˜å‚¨ã€ä¼šè¯è·Ÿè¸ªã€è¡Œä¸ºè®°å½•
5. âœ… **æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ** - å®‰å…¨æ–‡ä»¶æ“ä½œã€ä¸Šä¼ ä¸‹è½½ã€å‹ç¼©å¤„ç†
6. âœ… **é…ç½®ç®¡ç†æ‰©å±•** - é…ç½®æ®µç®¡ç†ã€éªŒè¯ã€å˜æ›´è¿½è¸ª
7. âœ… **æ ¸å¿ƒé›†æˆ** - ç»Ÿä¸€å¯¼å…¥ã€å…¨å±€å®ä¾‹ç®¡ç†

**Webç»„ä»¶ç°åœ¨å¯ä»¥:**
- ğŸŒ æä¾›å®Œæ•´çš„Webç•Œé¢å’ŒAPI
- ğŸ“Š å®æ—¶ç›‘æ§æœåŠ¡å™¨æ€§èƒ½å’ŒçŠ¶æ€
- ğŸ‘¥ ç®¡ç†ç©å®¶æ•°æ®å’Œä¼šè¯
- ğŸ“ å®‰å…¨åœ°æ“ä½œæ–‡ä»¶ç³»ç»Ÿ
- âš™ï¸ åŠ¨æ€é…ç½®ç³»ç»Ÿè®¾ç½®
- ğŸ”” æ¥æ”¶å’Œæ¨é€å®æ—¶äº‹ä»¶
- ğŸ”§ é›†æˆç°æœ‰çš„Aetheriusç”Ÿæ€ç³»ç»Ÿ

æ‰€æœ‰æ‰©å±•éƒ½éµå¾ªAetheriusçš„è®¾è®¡åŸåˆ™ï¼Œæä¾›äº†å¼ºå¤§è€Œå®‰å…¨çš„Webç»„ä»¶å¼€å‘åŸºç¡€ã€‚